<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
<title>ALLO ‚Äî Premium Experience</title>

<style>
/* ===================== THEME ===================== */
:root{
  --bg-main:#0b0f14;--bg-dark:#07090d;
  --card:#161b22;--card-soft:#1c222b;
  --gold:#c9a24d;--gold-soft:#f5d57a;
  --yellow:#facc15;--orange:#fb923c;--blue:#60a5fa;
  --text:#e6edf3;--muted:#8b949e;
  --radius:18px;--shadow:0 14px 40px rgba(0,0,0,.45);
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Ubuntu;
  background:linear-gradient(180deg,var(--bg-main),var(--bg-dark));
  color:var(--text);
}
.app{max-width:560px;margin:auto;min-height:100%;padding:14px}
.screen{display:none}
.screen.active{display:block}
.card{background:var(--card);border-radius:var(--radius);padding:18px;margin-bottom:14px;box-shadow:var(--shadow)}
.card.soft{background:var(--card-soft)}
button{border:none;border-radius:14px;padding:14px;font-weight:600;cursor:pointer}
.primary{background:linear-gradient(135deg,var(--gold),var(--gold-soft));color:#000}
.secondary{background:#21262d;color:var(--text)}
.jaune{background:var(--yellow);color:#000}
.filtrer{background:var(--orange);color:#000}
.frozen{background:var(--blue);color:#000}
.stack{display:flex;flex-direction:column;gap:12px}
.item{background:#0d1117;border-radius:12px;padding:12px;display:flex;justify-content:space-between}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center}
.modal.active{display:flex}
.modal-content{background:var(--card);padding:18px;border-radius:18px;width:90%}
</style>
</head>

<body>
<div class="app">

<section id="landing" class="screen active">
  <div class="card">
    <h1>ALLO</h1>
    <p>Exp√©rience premium</p>
    <button class="primary" onclick="enterApp()">Entrer</button>
  </div>
</section>

<div id="app-shell" style="display:none">
  <section id="dashboard" class="screen">
    <div class="card">
      <button class="primary" onclick="go('cat-choco')">üç´ Cat√©gorie</button>
    </div>
  </section>

  <section id="cat-choco" class="screen">
    <div class="card">
      <button class="jaune" onclick="go('jaune')">Jaune</button>
      <button class="secondary" onclick="go('dashboard')">Retour</button>
    </div>
  </section>

  <section id="jaune" class="screen"></section>

  <section id="cart" class="screen">
    <div class="card">
      <div id="cart-list"></div>
      <button class="primary" onclick="openConfirm()">Confirmer</button>
    </div>
  </section>

  <div id="modal" class="modal">
    <div class="modal-content">
      <div id="confirm-content"></div>
      <button class="primary" onclick="sendOrder()">Envoyer</button>
      <button class="secondary" onclick="closeModal()">Annuler</button>
    </div>
  </div>
</div>

<script>
/* ===================== TELEGRAM ===================== */
const TG = window.Telegram?.WebApp || null;
TG?.ready();

/* ===================== ROUTER ===================== */
function go(id){
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  if(id==="cart") renderCart();
}
function enterApp(){
  document.getElementById("landing").classList.remove("active");
  document.getElementById("app-shell").style.display="block";
  go("dashboard");
}

/* ===================== DATA ===================== */
const PRODUCTS={jaune:[[10,"2g"],[20,"4g"]]};
let cart=[];

/* ===================== CATALOG ===================== */
document.getElementById("jaune").innerHTML=`
<div class="card">
${PRODUCTS.jaune.map(p=>`
<div class="item">
<span>${p[1]}</span>
<strong>${p[0]}‚Ç¨</strong>
<button onclick="addToCart(${p[0]},'${p[1]}')">+</button>
</div>`).join("")}
<button class="secondary" onclick="go('cart')">Panier</button>
</div>`;

/* ===================== PANIER ===================== */
function addToCart(price,qty){
  cart.push({price,qty,count:1});
}
function renderCart(){
  document.getElementById("cart-list").innerHTML=
  cart.map(i=>`${i.qty} ‚Äî ${i.price}‚Ç¨`).join("<br>");
}

/* ===================== COMMANDE ===================== */
function openConfirm(){
  document.getElementById("modal").classList.add("active");
  document.getElementById("confirm-content").innerHTML=
    cart.map(i=>`${i.qty} ‚Äî ${i.price}‚Ç¨`).join("<br>");
}
function closeModal(){
  document.getElementById("modal").classList.remove("active");
}

function sendOrder(){
  const total = cart.reduce((s,i)=>s+i.price,0);
  const order = {
    id: "ALLO-"+Date.now(),
    items: cart,
    total,
    date: new Date().toLocaleString()
  };

  if(TG){
    TG.sendData(JSON.stringify({
      type: "order",
      order: order
    }));
  }

  cart=[];
  closeModal();
  go("dashboard");
}
</script>
</body>
</html>
