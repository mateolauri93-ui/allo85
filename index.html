<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>ALLO ‚Äî Commande</title>

<style>
/* =====================================================
   THEME
===================================================== */
:root{
  --bg-main:#0b0f14;
  --bg-dark:#07090d;
  --card:#161b22;
  --card-soft:#1c222b;

  --gold:#c9a24d;
  --gold-soft:#f5d57a;

  --text:#e6edf3;
  --muted:#8b949e;

  --radius:18px;
  --shadow:0 14px 40px rgba(0,0,0,.45);
}

/* =====================================================
   RESET
===================================================== */
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Ubuntu;
  background:linear-gradient(180deg,var(--bg-main),var(--bg-dark));
  color:var(--text);
}

/* =====================================================
   LAYOUT
===================================================== */
.app{
  max-width:520px;
  margin:auto;
  padding:16px;
  min-height:100%;
}

/* =====================================================
   TYPO
===================================================== */
h1{
  font-size:36px;
  letter-spacing:3px;
  text-align:center;
}
h2{
  font-size:20px;
  margin-bottom:10px;
}
p{
  font-size:14px;
  color:var(--muted);
}

/* =====================================================
   CARDS
===================================================== */
.card{
  background:var(--card);
  border-radius:var(--radius);
  padding:18px;
  box-shadow:var(--shadow);
  margin-bottom:16px;
}
.card.soft{
  background:var(--card-soft);
}

/* =====================================================
   BUTTONS
===================================================== */
button{
  width:100%;
  border:none;
  border-radius:14px;
  padding:14px;
  font-size:15px;
  font-weight:600;
  cursor:pointer;
  transition:transform .15s ease, opacity .15s ease;
}

button:active{
  transform:scale(0.97);
}

.primary{
  background:linear-gradient(135deg,var(--gold),var(--gold-soft));
  color:#000;
}

.secondary{
  background:#21262d;
  color:var(--text);
}

/* =====================================================
   STACK
===================================================== */
.stack{
  display:flex;
  flex-direction:column;
  gap:12px;
}

/* =====================================================
   LIST ITEM
===================================================== */
.item{
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:#0d1117;
  padding:12px;
  border-radius:12px;
}

/* =====================================================
   MODAL
===================================================== */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.65);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:50;
}
.modal.active{
  display:flex;
}
.modal-content{
  background:var(--card);
  border-radius:var(--radius);
  padding:20px;
  width:92%;
  max-width:420px;
}
</style>
</head>

<body>
<div class="app">

  <!-- =========================
       HEADER
  ========================= -->
  <div class="card">
    <h1>ALLO</h1>
    <p style="text-align:center;margin-top:6px">
      Commande rapide & ma√Ætris√©e
    </p>
  </div>

  <!-- =========================
       CATALOGUE
  ========================= -->
  <section id="catalogue" class="card">
    <h2>Catalogue</h2>
    <div class="stack" id="product-list">
      <!-- produits inject√©s en JS -->
    </div>
  </section>

  <!-- =========================
       PANIER
  ========================= -->
  <section id="cart" class="card">
    <h2>Panier</h2>
    <div id="cart-list"></div>
    <div class="stack" style="margin-top:14px">
      <button class="primary" id="open-confirm">
        Confirmer la commande
      </button>
    </div>
  </section>

  <!-- =========================
       MODAL CONFIRMATION
  ========================= -->
  <div class="modal" id="confirm-modal">
    <div class="modal-content">
      <h2>Confirmation</h2>
      <div id="confirm-content" style="margin:12px 0"></div>

      <div class="stack">
        <button class="primary" id="send-telegram">
          Envoyer sur Telegram
        </button>
        <button class="secondary" id="close-modal">
          Annuler
        </button>
      </div>
    </div>
  </div>

</div>
<script>
/* =====================================================
   DONN√âES PRODUITS
===================================================== */
const PRODUCTS = [
  { id: 1, name: "Jaune", qty: "2g", price: 10 },
  { id: 2, name: "Jaune", qty: "4g", price: 20 },
  { id: 3, name: "Jaune", qty: "10g", price: 50 },
  { id: 4, name: "Filtrer", qty: "2g", price: 20 },
  { id: 5, name: "Filtrer", qty: "10g", price: 70 },
  { id: 6, name: "Frozen", qty: "3g", price: 30 },
  { id: 7, name: "Frozen", qty: "10g", price: 90 }
];

/* =====================================================
   STATE
===================================================== */
let cart = [];

/* =====================================================
   RENDER PRODUITS
===================================================== */
function renderProducts(){
  const list = document.getElementById("product-list");
  list.innerHTML = "";

  PRODUCTS.forEach(product => {
    const div = document.createElement("div");
    div.className = "item";
    div.innerHTML = `
      <span>${product.name} ${product.qty}</span>
      <strong>${product.price}‚Ç¨</strong>
      <button class="secondary">Ajouter</button>
    `;

    div.querySelector("button").addEventListener("click", () => {
      addToCart(product);
    });

    list.appendChild(div);
  });
}

/* =====================================================
   PANIER
===================================================== */
function addToCart(product){
  const found = cart.find(p => p.id === product.id);
  if(found){
    found.count += 1;
  } else {
    cart.push({ ...product, count: 1 });
  }
  renderCart();
}

function renderCart(){
  const box = document.getElementById("cart-list");
  box.innerHTML = "";

  if(cart.length === 0){
    box.innerHTML = "<p style='color:var(--muted)'>Panier vide.</p>";
    return;
  }

  cart.forEach((item, index) => {
    const div = document.createElement("div");
    div.className = "item";
    div.innerHTML = `
      <span>${item.name} ${item.qty} √ó ${item.count}</span>
      <strong>${item.price * item.count}‚Ç¨</strong>
    `;
    box.appendChild(div);
  });
}

/* =====================================================
   MODAL
===================================================== */
const modal = document.getElementById("confirm-modal");
const openConfirmBtn = document.getElementById("open-confirm");
const closeModalBtn = document.getElementById("close-modal");
const confirmContent = document.getElementById("confirm-content");

openConfirmBtn.addEventListener("click", () => {
  if(cart.length === 0){
    alert("Panier vide.");
    return;
  }

  confirmContent.innerHTML = "";
  cart.forEach(item => {
    const line = document.createElement("div");
    line.textContent =
      `${item.name} ${item.qty} √ó ${item.count} ‚Äî ${item.price * item.count}‚Ç¨`;
    confirmContent.appendChild(line);
  });

  modal.classList.add("active");
});

closeModalBtn.addEventListener("click", () => {
  modal.classList.remove("active");
});

/* =====================================================
   INIT
===================================================== */
renderProducts();
</script>
<script>
/* =====================================================
   ENVOI DE LA COMMANDE SUR TELEGRAM
   - Sans bot
   - Sans serveur
   - Vers un utilisateur pr√©cis
===================================================== */

const sendTelegramBtn = document.getElementById("send-telegram");

sendTelegramBtn.addEventListener("click", () => {
  if(cart.length === 0){
    alert("Panier vide.");
    return;
  }

  /* ===== Feedback visuel simple ===== */
  sendTelegramBtn.disabled = true;
  sendTelegramBtn.textContent = "Ouverture de Telegram‚Ä¶";
  sendTelegramBtn.style.opacity = "0.7";

  /* ===== G√©n√©ration du message ===== */
  let total = 0;
  let message = "üßæ COMMANDE ALLO\n\n";

  cart.forEach(item => {
    const lineTotal = item.price * item.count;
    total += lineTotal;
    message += `‚Ä¢ ${item.name} ${item.qty} √ó ${item.count} ‚Äî ${lineTotal}‚Ç¨\n`;
  });

  message += `\nüí∞ Total : ${total}‚Ç¨`;
  message += `\n‚è∞ ${new Date().toLocaleString()}`;

  /* ===== Destinataire Telegram ===== */
  const TELEGRAM_USERNAME = "allo856"; // SANS @

  const url =
    "https://t.me/" +
    TELEGRAM_USERNAME +
    "?text=" +
    encodeURIComponent(message);

  /* ===== Lancement Telegram ===== */
  setTimeout(() => {
    window.location.href = url;

    // reset visuel (au cas o√π)
    sendTelegramBtn.disabled = false;
    sendTelegramBtn.textContent = "Envoyer sur Telegram";
    sendTelegramBtn.style.opacity = "1";
  }, 600);
});
</script>

</body>
</html>
